<app-navbar></app-navbar>
<div class="card">
  <p-table [value]="ingredients" [tableStyle]="{'min-width': '50rem'}" styleClass="p-datatable-gridlines"
    [paginator]="true" [rows]="10" [showCurrentPageReport]="true"
    currentPageReportTemplate="{first} - {last} of {totalRecords}" [rowsPerPageOptions]="[10,25,50]">
    <ng-template pTemplate="caption">
      Ingrediente
      <button pButton label="Adaugă ingredient" class="p-button-rounded add-btn-mobile-version" (click)="showPopup()"
        icon="pi pi-plus"></button>
    </ng-template>
    <ng-template pTemplate="header">
      <tr>
        <th pSortableColumn="id">ID<p-sortIcon field="id"></p-sortIcon></th>
        <th pSortableColumn="name">Nume<p-sortIcon field="name"></p-sortIcon></th>
        <th pSortableColumn="energy">Valoare energetică<p-sortIcon field="energy"></p-sortIcon></th>
        <th pSortableColumn="fats">Grăsimi<p-sortIcon field="fats"></p-sortIcon></th>
        <th pSortableColumn="carbohydrates">Carbohidrați<p-sortIcon field="carbohydrates"></p-sortIcon></th>
        <th pSortableColumn="fibers">Fibre <p-sortIcon field="fibers"></p-sortIcon></th>
        <th pSortableColumn="protein">Proteine<p-sortIcon field="protein"></p-sortIcon></th>
        <th pSortableColumn="sugar">Zaharuri<p-sortIcon field="sugar"></p-sortIcon></th>
        <th>Actions</th>

      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-ingredient>
      <tr>
        <td>{{ingredient.id}}</td>
        <td>{{ingredient.name}}</td>
        <td>{{ingredient.energy}}</td>
        <td>{{ingredient.fats}}</td>
        <td>{{ingredient.carbohydrates}}</td>
        <td>{{ingredient.fiber}}</td>
        <td>{{ingredient.protein}}</td>
        <td>{{ingredient.sugar}}</td>
        <td>
          <p-button icon="pi pi-pencil" styleClass="edit-btn" (click)="showIngredientEditPopup(ingredient)">
          </p-button>
          <p-button (click)="showIngredientDeletePopup(ingredient.id)" icon="pi pi-times"
            styleClass="delete-btn"></p-button>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>

<p-dialog header="Adăugare ingredient" [modal]="true" [breakpoints]="{'960px': '75vw', '640px': '100vw'}"
  [(visible)]="displayPopup" styleClass="custom-popup" [closable]="true">
  <div class="col-12 md:col-4">
    <div class="p-inputgroup">
      <input type="text" pInputText placeholder="Numele ingredientului" [(ngModel)]="newIngredient.name" name="name">
    </div>
  </div>
  <div class="col-12 md:col-4">
    <div class="p-inputgroup">
      <input type="text" pInputText placeholder="Valoare energetică" [(ngModel)]="newIngredient.energy" name="energy">
    </div>
  </div>

  <div class="col-12 md:col-4">
    <div class="p-inputgroup">
      <input type="text" pInputText placeholder="Grăsimi" [(ngModel)]="newIngredient.fats" name="fats">
    </div>
  </div>

  <div class="col-12 md:col-4">
    <div class="p-inputgroup">
      <input type="text" pInputText placeholder="Carbohidrați" [(ngModel)]="newIngredient.carbohydrates"
        name="carbohydrates">
    </div>
  </div>

  <div class="col-12 md:col-4">
    <div class="p-inputgroup">
      <input type="text" pInputText placeholder="Fibre" [(ngModel)]="newIngredient.fiber" name="fiber">
    </div>
  </div>

  <div class="col-12 md:col-4">
    <div class="p-inputgroup">
      <input type="text" pInputText placeholder="Proteine" [(ngModel)]="newIngredient.protein" name="protein">
    </div>
  </div>
  <div class="col-12 md:col-4">
    <div class="p-inputgroup">
      <input type="text" pInputText placeholder="Zaharuri" [(ngModel)]="newIngredient.sugar" name="sugar">
    </div>
  </div>
  <ng-template pTemplate="footer">
    <div>
      <button pButton label="Anulează" (click)="displayPopup=false" class="p-button-rounded"></button>
      <button pButton label="Adaugă" class="p-button-label" (click)="onSubmitNewIngredient()"></button>
    </div>
  </ng-template>
</p-dialog>

<p-dialog header="Modificare ingredient" [(visible)]="displayEditPopup" [closable]="true" styleClass="edit-popup"
  [modal]="true">
  <div class="w-80">
    <div class="card1">
      <p>Numele ingredientului</p>
      <input class="custom-input" id="editName " pInputText [(ngModel)]="currentEditName">
    </div>
    <div class="card1">
      <p>Valoare energetică</p>
      <input class="custom-input" type="text" id="editName" pInputText [(ngModel)]="currentEditEnergy">
    </div>
    <div class="card1">
      <p>Grăsimi</p>
      <input id="fats" class="custom-input" type="text" pInputText [(ngModel)]="currentEditFats">
    </div>
    <div class="card1">
      <p>Carbohidrați</p>
      <input class="custom-input" type="text" pInputText [(ngModel)]="currentEditCarbohydrates">
    </div>
    <div class="card1">
      <p>Fibre</p>
      <input class="custom-input" type="text" pInputText [(ngModel)]="currentEditFibers">
    </div>
    <div class="card1">
      <p>Proteine</p>
      <input class="custom-input" type="text" pInputText [(ngModel)]="currentEditProteins">
    </div>
    <div class="card1">
      <p>Zaharuri</p>
      <input class="custom-input" type=" text" pInputText [(ngModel)]="currentEditSugar">
    </div>
  </div>
  <ng-template pTemplate="footer">
    <div>
      <button pButton label="Anulează" (click)="displayEditPopup=false" class="p-button-rounded"></button>
      <button pButton label="Salvează" class="p-button-label" (click)="onEditIngredientSaveButtonClick()"></button>
    </div>
  </ng-template>
</p-dialog>

<app-delete-confirmation-popup *ngIf="displayDeletePopup" [deleteModalPopup]="true"
  (deletePopupClosed)="onDeleteIngredientPopupClosed($event)"></app-delete-confirmation-popup>
